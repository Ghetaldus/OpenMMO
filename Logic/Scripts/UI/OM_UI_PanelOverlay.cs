// =======================================================================================
// OpenMMO Groundwork
// =======================================================================================

using OpenMMO.Groundwork;
using UnityEngine;
using UnityEngine.UI;

namespace OpenMMO.Groundwork {

	// ===================================================================================
	// OM_UI_PanelOverlay
	// ===================================================================================
	public partial class OM_UI_PanelOverlay : OM_UI_Panel {
		
		[Header("---------- [Required] UI Elements ----------")]
	    public Image background;
	    [Range(1,99)]public float waitDuration = 3f;
	    [Range(1,99)]public float fadeDuration = 3f;
	    
	    // -------------------------------------------------------------------------------
		// OnEnable
		// -------------------------------------------------------------------------------
		public void OnEnable() {
			FadeShow(waitDuration);
		}
	    
	    // -------------------------------------------------------------------------------
		// OnChildEnable
		// -------------------------------------------------------------------------------
		public override void OnChildEnable() {}
		
	    // -------------------------------------------------------------------------------
		// OnInvokeRepeating
		// -------------------------------------------------------------------------------
		public override void OnInvokeRepeating() {}
		
		// -------------------------------------------------------------------------------
		// SlowUpdate
		// -------------------------------------------------------------------------------
		public override void SlowUpdate() {}
		
		// -------------------------------------------------------------------------------
		// Show
		// -------------------------------------------------------------------------------
	    public override void Show() {
			FadeShow();
	    }
	    
		// -------------------------------------------------------------------------------
		// FadeShow
		// -------------------------------------------------------------------------------
	    public void FadeShow(float fDuration = 0)
	    {
	    	if (panelRoot != null && background != null)
			{
				Invoke("FadeOut", fDuration);
			}
			else
			{
				Debug.LogWarning(Constants.STR_ERROR_MISSING_UI + this.name);
			}
	    }
	    
		// -------------------------------------------------------------------------------
		// FadeOut
		// -------------------------------------------------------------------------------
		protected void FadeOut() {
			background.GetComponent<CanvasRenderer>().SetAlpha(1f);
			panelRoot.SetActive(true);
			background.CrossFadeAlpha(0, fadeDuration, true);
			Invoke("Hide", fadeDuration);
		}
		
	    // -------------------------------------------------------------------------------
	    
	}

}

// =======================================================================================